<div class="container">
    <div class="row h3 py-5">
      <div class="col  mx-auto">
        投稿詳細
      </div>
    </div>
    <div class="row">
      <div class="col">
        <p class="">タイトル：<%= @post.title %></p>
        <p class="text-wrap">説明：<%= @post.introduction %></p>
        <p class="">ジャンル：<%= @post.genre.name %></p>
        <p class="">投稿ユーザー画像：<%= link_to public_customer_path(@post.customer), style:"text-decoration: none;" do %>
                                <%= image_tag @post.customer.get_profile_image(50,50), class:"icon" %>
                              <% end %></p>
        <p class="">ユーザーネーム：<%= @post.customer.name %></p>
        <p class="">投稿日：<%= @post.created_at.strftime('%Y/%m/%d') %></p>
        <p class="">
          <% if @post.favorited_by?(current_customer) %>
            <!--# 一致するレコードが存在する＝すでにいいね済みの場合はdestroyアクションへ-->
            <%= link_to public_post_favorite_path(@post), method: :delete do %>
              <span style="color:red;">︎️︎♥︎</span>
            <% end %>
          <% else %>
            <!--# 一致するレコードが存在しない＝まだいいねしていない場合はcreateアクションへ-->
            <%= link_to public_post_favorites_path(@post), method: :post do %>
              <span>︎♡</span>
            <% end %>
          <% end %>
        </p>
      </div>
    </div>

    <div class="row py-5">
      <% if @post.customer == current_customer %>
        <%= link_to "編集する", edit_public_post_path, class:"btn btn-info ml-3" %>
        <%= link_to "削除する", public_post_path(@post), method: :delete, class:"btn btn-danger ml-3" %>
      <% end %>
    </div>

    <div class="row">
      <div class="col">
        <%= form_with model: [@post, @post_comment], url: public_post_post_comments_path(@post, @post_comment), method: :post do |f| %>
          <%= f.text_area :comment, rows: '5', placeholder: "コメントをここに", class: "row" %>
          <%= f.submit "送信する", class: "row btn btn-info my-3" %>
        <% end %>
      </div>
    </div>

    <div class="row">
      <div class="col-8">
        <p>コメント件数：<%= @post_comments.count %></p>
        <% @post_comments.each do |post_comment| %>
          <p class="text-wrap"><%= post_comment.comment %></p>
          <div>
            <%= link_to public_customer_path(post_comment.customer), style:"text-decoration: none;" do %>
              <%= image_tag post_comment.customer.get_profile_image(50,50), class:"icon" %>
            <% end %>
            <%= post_comment.customer.name %>
            <%= post_comment.created_at.strftime('%Y/%m/%d') %>

            <% if post_comment.customer == current_customer %>
             <%= link_to "削除", public_post_post_comment_path(@post, post_comment), method: :delete, class: "btn btn-danger offset-1" %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="row mx-auto my-5">
      <%= paginate @post_comments, theme: 'bootstrap-5' %>
    </div>

</div>